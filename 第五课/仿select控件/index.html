<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="main.css">
    
    <title>Document</title>
</head>

<body>
    <div class="main">
        <div id="search">
            <span>搜索内容</span>
            <button>搜索</button>
        </div>
        <ul>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>
    <script>
        function Select() {
            this.choose = document.getElementById('search').children[0]
            this.ul = document.getElementsByTagName('ul')[0]
            this.lis = Array.from(document.getElementsByTagName('li'))
            this.show = false
            this.msgs = ['地下城与勇士',
                '魔兽世界国服',
                '热血江湖',
                '神鬼传奇',
                '大话西游II',
                '幻想世界'
            ]
            var self = this
            this.init = function () {
                self.choose.innerText = "请选择游戏名称"
                this.lis.forEach(function (item, index) {
                    item.innerText = self.msgs[index]
                })
            }
            this.showList = function () {
                document.onclick = function () {
                    self.ul.style.display = "none"
                    self.show = false
                }
                self.choose.onclick = function (e) {
                    e.cancelBubble = true //阻止事件冒泡
                    if (!self.show) {
                        self.ul.style.display = "block"
                        self.show = true
                    } else {
                        self.ul.style.display = "none"
                        self.show = false
                    }
                }
            }

            this.fillSpan = function () {
                self.lis.forEach(function (item, index) {
                    item.onclick = function (e) {
                        e.cancelBubble = true
                        var text = item.innerText
                        self.choose.innerText = text
                        self.ul.style.display = "none"
                        self.show = false
                    }
                })
            }

            this.prepare = function () {
                this.init()
                this.showList()
                this.fillSpan()
            }
        }

        var obj = new Select()
        obj.prototype = {
            constructor: obj,
            toString: Object.toString,
            __proto__: Object.prototype
        }
        obj.prepare()
        obj.toString()
        console.log(obj)
    </script>
</body>

</html>